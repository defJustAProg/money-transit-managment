# Веб-сервис для управления движением денежных средств (ДДС)

Система для учета, управления и анализа поступлений и списаний денежных средств.

## Возможности

- ✅ Создание, редактирование, удаление и просмотр записей о движении денежных средств
- ✅ Фильтрация транзакций по дате, статусу, типу, категории и подкатегории
- ✅ Управление справочниками (статусы, типы операций, категории)
- ✅ Древовидная структура категорий с подкатегориями
- ✅ Валидация логических зависимостей между сущностями
- ✅ REST API для интеграции с внешними системами

## Технологии

- **Backend**: Django 5.0, Django REST Framework
- **База данных**: SQLite (по умолчанию), PostgreSQL (для продакшена)
- **Frontend**: Django Templates
- **Древовидные структуры**: django-mptt
- **Документация API**: drf-spectacular (Swagger/OpenAPI)


## Модели данных

### Status (Статус)
- Бизнес, Личное, Налог
- Расширяемый список

### TransactionType (Тип операции)
- Пополнение, Списание
- Расширяемый список

### Category (Категория)
- Древовидная структура с MPTT
- Привязка к типу операции
- Поддержка подкатегорий

### Transaction (Транзакция)
- Дата операции
- Статус, тип, категория
- Сумма в рублях
- Комментарий (необязательный)

## Установка и запуск

Требования к окружению:
- наличие Docker, docker-compose

### Docker (продакшен)

1. **Создание .env файла**
   ```bash
   cp .env.example .env
   ```

2. **Запуск с Docker Compose**
   ```bash
   docker-compose up --build -d
   ```
3. **Удаление контейнеров**
   ```bash
   docker-compose down
   ```
4. 3. **Удаление контейнеров и данных**
   ```bash
   docker-compose down -v
   ```


## Использование

### Веб-интерфейс

1. **Главная страница** - просмотр всех транзакций с фильтрацией
2. **Добавление транзакции** - форма создания новой записи
3. **Редактирование** - изменение существующих транзакций
4. **Управление справочниками** - добавление/редактирование статусов, типов и категорий

### Открытие в браузере
- **Главная страница**: http://127.0.0.1:8000/
- **Админ-панель**: http://127.0.0.1:8000/backend/admin/
- **API документация**: http://127.0.0.1:8000/backend/swagger/

### Фильтрация транзакций

API поддерживает следующие параметры фильтрации:
- `date_from` - дата начала периода
- `date_to` - дата окончания периода
- `status` - ID статуса
- `transaction_type` - ID типа операции
- `category` - ID категории

Пример: `/backend/api/transactions/?date_from=2025-01-01&status=1`
